(self.webpackChunktest_practice=self.webpackChunktest_practice||[]).push([[745],{3126:function(e,t,n){"use strict";var r=n(3765),a=n(1068),o=n(2424),u=n(3978),l=n(4074),c=n(530);u(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(6394)),f=c(n(9198)),s=c(n(1379)),d=c(n(214)),p=c(n(6380)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},o=u&&l;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?l(e,c):null;i&&(i.get||i.set)?u(a,c,i):a[c]=e[c]}a.default=e,n&&n.set(e,a);return a}(n(6055)),m=c(n(1710));function v(e){if("function"!=typeof o)return null;var t=new o,n=new o;return(v=function(e){return e?n:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,p.default)(e);if(t){var o=(0,p.default)(this).constructor;n=a(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.default)(this,n)}}n(7785),n(8960);var k=function(e){(0,s.default)(n,e);var t=y(n);function n(){var e;return(0,i.default)(this,n),(e=t.call(this)).state={},e}return(0,f.default)(n,[{key:"render",value:function(){var e=this.props.children;return h.default.createElement(h.default.Fragment,null,e)}}]),n}(h.Component);k.propTypes={children:m.default.node};var b=k;t.default=b},4353:function(e,t,n){"use strict";var r=n(3765),a=n(1068),o=n(2424),u=n(3978),l=n(4074),c=n(530);u(t,"__esModule",{value:!0}),t.default=void 0;var i=c(n(4198)),f=c(n(3032)),s=c(n(6394)),d=c(n(9198)),p=c(n(1222)),h=c(n(1379)),m=c(n(214)),v=c(n(6380)),y=c(n(7672)),k=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=x(t);if(n&&n.has(e))return n.get(e);var a={},o=u&&l;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?l(e,c):null;i&&(i.get||i.set)?u(a,c,i):a[c]=e[c]}a.default=e,n&&n.set(e,a);return a}(n(6055)),b=c(n(8249)),w=c(n(1710));function x(e){if("function"!=typeof o)return null;var t=new o,n=new o;return(x=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,v.default)(e);if(t){var o=(0,v.default)(this).constructor;n=a(r,arguments,o)}else n=r.apply(this,arguments);return(0,m.default)(this,n)}}n(6594);var E=0,S=function(e){(0,h.default)(n,e);var t=g(n);function n(e){var r;(0,s.default)(this,n),r=t.call(this,e),(0,y.default)((0,p.default)(r),"componentWillUnmount",(function(){}));var a=r.props.show;return r.state={show:a},r}return(0,d.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){if(!t.show){var n=this.props.node;b.default.unmountComponentAtNode(n),document.body.removeChild(n)}return!1}},{key:"render",value:function(){var e=this.state.show,t=this.props,n=t.content,r=t.height,a=t.layer,o=t.model;return k.default.createElement("div",{className:"model-mini-layer",style:{display:e?null:"none"}},k.default.createElement("div",{className:"layer"},k.default.createElement("div",{className:"content"},n)),a?k.default.createElement("div",{className:o?"layer-back white":"layer-back black",style:{height:"".concat(r,"px")}}):"")}}]),n}(k.Component);(0,y.default)(S,"propTypes",{content:w.default.string,height:w.default.number,layer:w.default.bool,model:w.default.bool,node:w.default.object,show:w.default.bool}),(0,y.default)(S,"defaultProps",{content:"",layer:!0,model:!0,show:!0});function N(){var e;e=document.body.scrollTop+document.documentElement.scrollTop,E=(0,i.default)(e,10);var t=document.querySelector(".toast-model-mini");document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",t&&t.addEventListener("touchmove",(function(e){e.preventDefault()}),!1)}function C(){var e,t=document.querySelector(".toast-model-mini");document.querySelector(".toast-marker")||(document.documentElement.style.overflow="inherit",document.body.style.overflow="inherit",e=E,document.body.scrollTop=e,document.documentElement.scrollTop=e),t&&t.removeEventListener("touchmove",(function(e){e.preventDefault()}),!1)}var T={show:function(e){var t=e.content,n=e.callback,r=e.duration,a=e.layer,o=e.model,u=function(){var e=document.createElement("div");return e.setAttribute("id","toast-".concat(Math.floor(1e7*Math.random()))),e.setAttribute("class","toast-model-mini"),document.body.appendChild(e),e}();r?"number"!=typeof r&&(r=2e3):r=2e3,(0,f.default)((function(){C(),b.default.unmountComponentAtNode(u),document.body.removeChild(u),"function"==typeof n&&n()}),r),b.default.render(k.default.createElement(S,{content:t,height:document.body.clientHeight,layer:a,model:o,node:u}),u),N()}};t.default=T},6393:function(e,t,n){"use strict";var r=n(3765),a=n(1068),o=n(2424),u=n(3978),l=n(4074),c=n(530),i=c(n(6394)),f=c(n(9198)),s=c(n(1222)),d=c(n(1379)),p=c(n(214)),h=c(n(6380)),m=c(n(7672)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=w(t);if(n&&n.has(e))return n.get(e);var a={},o=u&&l;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?l(e,c):null;i&&(i.get||i.set)?u(a,c,i):a[c]=e[c]}a.default=e,n&&n.set(e,a);return a}(n(6055)),y=n(8249),k=c(n(3126)),b=n(3250);function w(e){if("function"!=typeof o)return null;var t=new o,n=new o;return(w=function(e){return e?n:t})(e)}function x(e){var t=function(){if("undefined"==typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(a(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var o=(0,h.default)(this).constructor;n=a(r,arguments,o)}else n=r.apply(this,arguments);return(0,p.default)(this,n)}}n(5278);var g={bodyMaxWidth:425,designWidth:750},E=window.CONFIG.upload,S=function(e){(0,d.default)(n,e);var t=x(n);function n(e){var r;return(0,i.default)(this,n),r=t.call(this,e),(0,m.default)((0,s.default)(r),"handleClick",(function(){(0,b.handleRestartDefault)(),r.check.click()})),(0,m.default)((0,s.default)(r),"handleChange",(function(e){var t=e[0];t&&(E.file=t,(0,b.prepareFile)(t))})),(0,m.default)((0,s.default)(r),"handleState",(function(){var e=r.state.pass;return e?(E.state="stop",r.setState({pass:!1}),r.file.innerHTML="START",!1):e?void 0:(E.state="start",r.setState({pass:!0}),r.file.innerHTML="STOP",E.file&&(0,b.prepareFile)(E.file),!1)})),r.state={pass:!0},r}return(0,f.default)(n,[{key:"render",value:function(){var e=this;return v.default.createElement(k.default,g,v.default.createElement("div",{className:"demo"},v.default.createElement("h1",{className:"title"},"upload file"),v.default.createElement("p",{className:"descr"},"A upload file and want to look for a girlfriend..."),v.default.createElement("div",{className:"upload"},v.default.createElement("div",{className:"one",id:"one"},v.default.createElement("div",{className:"list"},v.default.createElement("span",{className:"topic"},"校验文件进度"),v.default.createElement("div",{className:"check"},v.default.createElement("div",{id:"extract",style:{width:"0%"}},v.default.createElement("p",null,"0%"))))),v.default.createElement("div",{className:"one",id:"two"},v.default.createElement("div",{className:"list"},v.default.createElement("span",{className:"topic"},"上传文件进度"),v.default.createElement("div",{className:"check"},v.default.createElement("div",{id:"upload",style:{width:"0%"}},v.default.createElement("p",null,"0%"))))),v.default.createElement("div",{className:"one",id:"three"},v.default.createElement("div",{className:"list"},v.default.createElement("span",{className:"topic"},"上传文件结果"),v.default.createElement("div",{className:"check"},v.default.createElement("a",{className:"jump",href:"",target:"_blank"}))))),v.default.createElement("div",{className:"submit"},v.default.createElement("input",{className:"check-file",type:"file",ref:function(t){e.check=t},onChange:function(t){return e.handleChange(t.target.files)}}),v.default.createElement("button",{className:"click-file",type:"button",onClick:this.handleClick},"Click This"),v.default.createElement("div",{className:"click-state",ref:function(t){e.file=t},onClick:this.handleState,role:"presentation"},"STOP"))))}}]),n}(v.Component),N=window.CONFIG||{};(0,y.render)(v.default.createElement(S,N),document.querySelector("#app"))},3250:function(e,t,n){"use strict";var r=n(3978),a=n(530);r(t,"__esModule",{value:!0}),t.prepareFile=function(e){return h.apply(this,arguments)},t.handleRestartDefault=function(){var e=document.querySelector("#one");e.style.display="none";var t=e.querySelector("#extract");t.style.width="0%",t.querySelector("p").innerHTML="0%",document.querySelector("#two").style.display="none";var n=document.querySelector("#upload");n.style.width="0%",n.querySelector("p").style.innerHTML="0%";var r=document.querySelector("#three");r.style.display="none";var a=r.querySelector(".jump");a.innerHTML="",a.href=""},n(1539),n(8674);var o=a(n(3109)),u=a(n(3476)),l=a(n(3649)),c=a(n(8580)),i=a(n(7766)),f=a(n(1161)),s=a(n(8322)),d=a(n(4353)),p=0;function h(){return(h=(0,f.default)(o.default.mark((function e(t){var n,r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C(t.type)){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,m(t);case 5:return n=e.sent,e.next=8,v({file:t,token:n});case 8:if(200!==(r=e.sent).code){e.next=14;break}return T(r.file),d.default.show({content:"ha-ha，极速上传成功！"}),console.log("---"),e.abrupt("return",!1);case 14:return e.next=16,k({file:t,token:n,list:r.chunk});case 16:if(!e.sent){e.next=19;break}return e.abrupt("return",!1);case 19:return e.next=21,S({file:t,token:n});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){var t=document.querySelector("#one");t.style.display="block";var n=t.querySelector("#extract"),r=n.querySelector("p");return new u.default((function(t,a){var o=(0,l.default)(File.prototype)||File.prototype.mozSlice||File.prototype.webkitSlice,u=new s.default.ArrayBuffer,c=new FileReader,i=0;c.onload=function(a){u.append(a.target.result),(i+=1)<100?q({blobSlice:o,chunkSize:51200,currentChunk:i,extract:n,extractText:r,file:e,fileReader:c}):(t(u.end()),console.log("1. extract file finished."))},c.onerror=function(){console.error("something is error."),a()},q({blobSlice:o,chunkSize:51200,currentChunk:i,extract:n,extractText:r,file:e,fileReader:c})}))}function v(e){return y.apply(this,arguments)}function y(){return(y=(0,f.default)(o.default.mark((function e(t){var n,r,a,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.file,a=t.token,!C(r.type)){e.next=4;break}return e.abrupt("return",!1);case 4:return u={},e.next=7,fetch((0,i.default)(n="/upload/file/check?token=".concat(a,"&type=")).call(n,r.type),{method:"get"}).then((function(e){return e.json()})).then((function(e){u=e,console.log("2. check file finished.")})).catch((function(e){console.log(e)}));case 7:return e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){return b.apply(this,arguments)}function b(){return(b=(0,f.default)(o.default.mark((function e(t){var n,r,a,u,l,i,f,s,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.file,r=t.token,a=t.list,p=a.length,51200,u=Math.ceil(n.size/51200),document.querySelector("#two").style.display="block",l=document.querySelector("#upload"),i=l.querySelector("p"),f=[],s=0;s<u;s++)(0,c.default)(a).call(a,"".concat(s))||f.push(s);return e.next=12,w({stack:f,file:n,token:r,chunks:u,uploadNode:l,uploadText:i});case 12:return"stop"===(d=e.sent)?console.log("3. upload file is stop."):console.log("3. slice and upload file finished."),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return(x=(0,f.default)(o.default.mark((function e(t){var n,r,a,u,l,c,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.stack,r=t.file,a=t.token,u=t.chunks,l=t.uploadNode,c=t.uploadText,!(n.length<=0)){e.next=4;break}return p=0,e.abrupt("return",!1);case 4:return e.next=6,g({file:r,key:n[0],token:a,chunks:u,callback:function(){var e=(0,f.default)(o.default.mark((function e(t){var i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.code){e.next=13;break}if("start"!==window.CONFIG.upload.state){e.next=12;break}return p+=1,i=Math.floor(p/u*100),l.style.width="".concat(i,"%"),c.innerHTML="".concat(i,"%"),n.shift(),e.next=10,w({stack:n,file:r,token:a,chunks:u,uploadNode:l,uploadText:c});case 10:e.next=13;break;case 12:n=[];case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()});case 6:if("stop"!==(i=window.CONFIG.upload).state){e.next=11;break}return e.abrupt("return",!0);case 11:if("start"!==i.state){e.next=13;break}return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return E.apply(this,arguments)}function E(){return(E=(0,f.default)(o.default.mark((function e(t){var n,r,a,u,c,i,s,d;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.file,r=t.key,a=t.token,u=t.chunks,c=t.callback,s=(r+1)*(i=51200)>=n.size?n.size:(r+1)*i,(d=new FormData).append("data",(0,l.default)(n).call(n,r*i,s)),d.append("total",u),d.append("index",r),d.append("token",a),e.next=10,fetch("/upload/file/upload",{method:"post",body:d}).then((function(e){return e.json()})).then(function(){var e=(0,f.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error(e)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){return N.apply(this,arguments)}function N(){return(N=(0,f.default)(o.default.mark((function e(t){var n,r,a;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.file,a=t.token,!C(r.type)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,fetch((0,i.default)(n="/upload/file/merge?token=".concat(a,"&type=")).call(n,r.type),{method:"get"}).then((function(e){return e.json()})).then((function(e){T(e.file),console.log("4. query file finished."),console.log("---")}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return!function(e){var t;return(0,c.default)(t=["application/pdf","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","audio/mp3","audio/wav","image/gif","image/jpeg","image/png","image/webp","video/mp4"]).call(t,e)}(e)&&(d.default.show({content:"ha-ha，不能上传（".concat(e,"）格式！"),duration:3e3}),!0)}function T(e){var t,n,r,a,o=document.querySelector("#three");o.style.display="block";var u=o.querySelector(".jump");u.innerHTML=(0,i.default)(t=(0,i.default)(n="".concat(location.protocol,"//")).call(n,location.host,"/")).call(t,e),u.href=(0,i.default)(r=(0,i.default)(a="".concat(location.protocol,"//")).call(a,location.host,"/")).call(r,e)}function q(e){var t=e.blobSlice,n=e.chunkSize,r=e.currentChunk,a=e.extract,o=e.extractText,u=e.file,l=e.fileReader,c=r*n,i=c+n>=u.size?u.size:c+n;l.readAsArrayBuffer(t.call(u,c,i)),a.style.width="".concat(r+1,"%"),o.innerHTML="".concat(r+1,"%")}},6594:function(e,t,n){"use strict";n.r(t)},8960:function(e,t,n){"use strict";n.r(t)},5278:function(e,t,n){"use strict";n.r(t)},7785:function(e,t,n){e.exports=n(3016)(147)},6055:function(e,t,n){e.exports=n(3016)(294)},1710:function(e,t,n){e.exports=n(3016)(697)},8249:function(e,t,n){e.exports=n(3016)(935)},3016:function(e){"use strict";e.exports=vendors_8f6e0e28114193f887b7}},function(e){"use strict";var t=function(t){return e(e.s=t)};e.O(0,[216],(function(){return t(3662),t(8188),t(6393)}));e.O()}]);